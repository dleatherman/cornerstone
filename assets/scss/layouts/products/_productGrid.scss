// =============================================================================
// PRODUCT GRID (CSS)
// =============================================================================


// Product grid view
// -----------------------------------------------------------------------------
//
// 1. Re-set the font-size, as we're reducing it to 0 in the .products class.
//
// -----------------------------------------------------------------------------

.productGrid {

    @include u-listBullets("none");
    @include grid-row($behavior: "nest");
    font-size: 0; // 1
    margin: 0 auto;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;

    .product {
        display: flex;
        flex-wrap: wrap;
        width: 50%;
        font-size: fontSize("base"); // 1
        padding: 0 1rem;

        @include breakpoint("small") {
            width: calc((100% - 3rem) / 2);
        }

        @include breakpoint("medium") {
            padding: 0 3rem;
            width: calc((100% - 3rem) / 4);
        }

        .button {
            color: stencilColor("grey");
            background: stencilColor("navy");
            font-family: stencilFontFamily("sweet-font");
            text-transform: uppercase;
            text-decoration: none;
            border: 1px solid stencilColor("navy");
            border-radius: 0;
            font-weight: 300;
    
            &:hover {
                color: stencilColor("navy");
                background: transparent;
                border: 1px solid stencilColor("navy");
            }
        }
    }

    @include breakpoint("medium") {
        margin-bottom: spacing("single");
    }

    .card {
        align-items: stretch;
        display: flex;
        flex-flow: column nowrap;
        flex: 1;
        justify-content: space-between;
        @include breakpoint('medium') {
            position: relative;
        }
        .card-body {
            flex-grow: 1;
            padding-bottom: 0.5rem;
        }
    }

    .card:hover {
        .card-actions {
            visibility: visible;
        }
    }

    .card-actions {
        text-align: center;
        visibility: visible;
        @include breakpoint('medium') {
            left: 0;
            margin: 0 auto;
            position: absolute;
            right: 0;
            top: 33%;
            transition: visibility 0.2s ease-in-out;
            visibility: hidden;
        }
        .btn {
            width: 100%;
            @include breakpoint('medium') {
                width: auto;
            }
        }
    }
}


// Product when sidebar is present
// -----------------------------------------------------------------------------
//
// 1. When the sidebar is visible, reduce products to 3 across.
//
// -----------------------------------------------------------------------------

.page-sidebar + .page-content {

    .productGrid {
        // scss-lint:disable SelectorDepth, NestingDepth
        .product { // 1
            @include breakpoint("small") {
                width: grid-calc(4, $total-columns);
            }
        }
    }

}


//
// Product Grid with masonry layout
//
// Purpose: Display products in a masonry grid, with a display inline-block for
// older browsers that don't support css multicolumn
//
// -----------------------------------------------------------------------------

.productMasonry {
    column-count: 2;
    column-fill: auto;
    column-gap: remCalc(20px);
    margin: 0 0 spacing("single");
    overflow: hidden;

    @include breakpoint("small") {
        column-count: 3;
    }

    @include breakpoint("medium") {
        column-count: 4;
    }

    .product {
        break-inside: avoid;
        page-break-inside: avoid; // for firefox
        display: block;
        margin-bottom: spacing("double");
        padding: 0;
        width: 100%;
    }

    .card {
        margin: 0;
    }
}


// Product grid view variation
// -----------------------------------------------------------------------------

.productGrid--maxCol6 {
    .no-csscolumns & {
        // scss-lint:disable SelectorDepth, NestingDepth
        .product {
            @include breakpoint("medium") {
                width: grid-calc(2, $total-columns);
            }
        }
    }

    .csscolumns & {
        @include breakpoint("medium") {
            column-count: 6;
        }
    }
}

.productGrid--maxCol3 {
    .no-csscolumns & {
        // scss-lint:disable SelectorDepth, NestingDepth
        .product {
            @include breakpoint("medium") {
                width: grid-calc(4, $total-columns);
            }
        }
    }

    .csscolumns & {
        @include breakpoint("medium") {
            @include grid-column(12);

            float: none;

            // scss-lint:disable SelectorDepth, NestingDepth
            .product {
                @include grid-column(4, $float: none);
            }
        }
    }
}
